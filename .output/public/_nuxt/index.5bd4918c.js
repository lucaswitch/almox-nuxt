import{n as b,_,o as i,ay as p,w as d,b as l,az as c,c as g,d as y,aA as x,a as w,J as V,F as k}from"./entry.ed656c21.js";import{u as C}from"./auth.3e11f5f3.js";import{s as v,p as F,Y as I,g as h,h as B,i as L}from"./VCard.dccd0248.js";import{V as O}from"./VBtn.0a83d323.js";import"./tag.9b81e797.js";import"./VImg.4995c958.js";import"./VAvatar.9ba6e027.js";v(F);const{object:S,string:f,number:K}=I;let U=S({username:f().min(1).max(250).required().label("Usu치rio"),password:f().required().min(1).max(60).label("Senha")});const N={setup(){return{auth:C()}},data(){return{form:{username:"",password:""},errors:{},loading:!1,show_password:!1}},methods:{handleOnClickPasswordIcon(){this.show_password=!this.show_password},async handleOnLogin(){this.loading=!0;const s=this.form;s.username=s.username.trim(),s.password=s.password.trim();let r=!0;try{await U.validate(s)}catch(o){r=!1;const n={};n[o.path]=o.message,this.errors=n}if(this.loading=!1,r)try{const{user:o,token:n}=await $fetch("/api/sign",{method:"post",body:s});this.auth.setCredentials({user:o,token:n}),b("/dashboard")}catch{this.errors.username="Usu치rio ou senha inv치lidos."}}}},E={key:1},T=w("br",null,null,-1);function j(s,r,o,n,e,a){return i(),p(B,{onSubmit:x(a.handleOnLogin,["prevent"])},{default:d(()=>{var t,u;return[l(h,{modelValue:e.form.username,"onUpdate:modelValue":r[0]||(r[0]=m=>e.form.username=m),readonly:e.loading,variant:"outlined",class:"mb-2",label:"Usu치rio",placeholder:"lucaswitch","error-messages":(t=e.errors)==null?void 0:t.username,clearable:""},null,8,["modelValue","readonly","error-messages"]),e.form.username&&e.form.username.length>0?(i(),p(h,{key:0,modelValue:e.form.password,"onUpdate:modelValue":r[1]||(r[1]=m=>e.form.password=m),"append-inner-icon":e.show_password?"mdi-eye":"mdi-eye-off",type:e.show_password?"text":"password","error-messages":(u=e.errors)==null?void 0:u.password,name:"input-10-1",variant:"outlined",label:"Senha",clearable:"","onClick:appendInner":a.handleOnClickPasswordIcon},null,8,["modelValue","append-inner-icon","type","error-messages","onClick:appendInner"])):c("",!0),e.form.username&&e.form.username.length>0&&e.form.password&&e.form.password.length>0?(i(),g("div",E,[T,l(O,{loading:e.loading,color:"primary",type:"submit",onClick:a.handleOnLogin,block:""},{default:d(()=>[y(" Entrar ")]),_:1},8,["loading","onClick"])])):c("",!0)]}),_:1},8,["onSubmit"])}const q=_(N,[["render",j]]),z={components:{SignInForm:q}},A=w("h1",{class:"d-flex justify-center mb-10"},"Login",-1);function P(s,r,o,n,e,a){const t=V("sign-in-form");return i(),g(k,null,[A,l(L,{class:"mx-auto px-6 py-8","max-width":"444",title:"Realizar login"},{default:d(()=>[l(t)]),_:1})],64)}const Q=_(z,[["render",P]]);export{Q as default};
