import{B as b,_,o as i,s as p,w as d,b as l,z as c,c as w,d as V,aD as x,a as g,R as y,F as k}from"./entry.a8ea04dc.js";import{u as C}from"./auth.cb07611c.js";import{s as v,p as B,Y as F,V as f}from"./VTextField.7b7381e2.js";import{V as I}from"./VBtn.fb6611c3.js";import{V as L}from"./VForm.fdb6c9e3.js";import{b as O}from"./VCard.73ffbd1f.js";import"./index.2e760ea7.js";import"./tag.19ec8209.js";import"./VImg.e08626a0.js";import"./forwardRefs.d6ed2341.js";import"./VAvatar.28b1b839.js";v(B);const{object:S,string:h,number:Z}=F;let U=S({username:h().min(1).max(250).required().label("Usu치rio"),password:h().required().min(1).max(60).label("Senha")});const N={setup(){return{auth:C()}},data(){return{form:{username:"",password:""},errors:{},loading:!1,show_password:!1}},methods:{handleOnClickPasswordIcon(){this.show_password=!this.show_password},async handleOnLogin(){this.loading=!0;const r=this.form;r.username=r.username.trim(),r.password=r.password.trim();let s=!0;try{await U.validate(r)}catch(o){s=!1;const n={};n[o.path]=o.message,this.errors=n}if(this.loading=!1,s)try{const{user:o,token:n}=await $fetch("/api/sign",{method:"post",body:r});this.auth.setCredentials({user:o,token:n}),b("/dashboard/schedules")}catch{this.errors.username="Usu치rio ou senha inv치lidos."}}}},E={key:1},T=g("br",null,null,-1);function j(r,s,o,n,e,a){return i(),p(L,{onSubmit:x(a.handleOnLogin,["prevent"])},{default:d(()=>{var t,u;return[l(f,{modelValue:e.form.username,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.username=m),readonly:e.loading,variant:"outlined",class:"mb-2",label:"Usu치rio",placeholder:"lucaswitch","error-messages":(t=e.errors)==null?void 0:t.username,clearable:""},null,8,["modelValue","readonly","error-messages"]),e.form.username&&e.form.username.length>0?(i(),p(f,{key:0,modelValue:e.form.password,"onUpdate:modelValue":s[1]||(s[1]=m=>e.form.password=m),"append-inner-icon":e.show_password?"mdi-eye":"mdi-eye-off",type:e.show_password?"text":"password","error-messages":(u=e.errors)==null?void 0:u.password,name:"input-10-1",variant:"outlined",label:"Senha",clearable:"","onClick:appendInner":a.handleOnClickPasswordIcon},null,8,["modelValue","append-inner-icon","type","error-messages","onClick:appendInner"])):c("",!0),e.form.username&&e.form.username.length>0&&e.form.password&&e.form.password.length>0?(i(),w("div",E,[T,l(I,{loading:e.loading,color:"primary",type:"submit",onClick:a.handleOnLogin,block:""},{default:d(()=>[V(" Entrar ")]),_:1},8,["loading","onClick"])])):c("",!0)]}),_:1},8,["onSubmit"])}const q=_(N,[["render",j]]),z={components:{SignInForm:q}},P=g("h1",{class:"d-flex justify-center mb-10"},"Login",-1);function R(r,s,o,n,e,a){const t=y("sign-in-form");return i(),w(k,null,[P,l(O,{class:"mx-auto px-6 py-8","max-width":"444",title:"Realizar login"},{default:d(()=>[l(t)]),_:1})],64)}const $=_(z,[["render",R]]);export{$ as default};
