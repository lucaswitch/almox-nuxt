import{s as b,_,o as i,ax as c,w as d,b as l,ay as p,c as w,d as x,az as y,a as g,ak as k,P as V}from"./entry.b6850ddb.js";import{u as C,z as v}from"./VBtn.dacf4789.js";import{s as I,p as B,Y as F,h,t as L,v as O}from"./VCard.08b793ce.js";import"./dimensions.ce510981.js";import"./VImg.16ed9c74.js";import"./VAvatar.0e693f16.js";I(B);const{object:S,string:f,number:J}=F;let U=S({username:f().min(1).max(250).required().label("Usu치rio"),password:f().required().min(1).max(60).label("Senha")});const N={setup(){return{auth:C()}},data(){return{form:{username:"",password:""},errors:{},loading:!1,show_password:!1}},methods:{handleOnClickPasswordIcon(){this.show_password=!this.show_password},async handleOnLogin(){this.loading=!0;const s=this.form;s.username=s.username.trim(),s.password=s.password.trim();let r=!0;try{await U.validate(s)}catch(o){r=!1;const n={};n[o.path]=o.message,this.errors=n}if(this.loading=!1,r)try{const{user:o,token:n}=await $fetch("/api/sign",{method:"post",body:s});this.auth.setCredentials({user:o,token:n}),b("/dashboard")}catch{this.errors.username="Usu치rio ou senha inv치lidos."}}}},z={key:1},E=g("br",null,null,-1);function P(s,r,o,n,e,a){return i(),c(L,{onSubmit:y(a.handleOnLogin,["prevent"])},{default:d(()=>{var t,u;return[l(h,{modelValue:e.form.username,"onUpdate:modelValue":r[0]||(r[0]=m=>e.form.username=m),readonly:e.loading,variant:"outlined",class:"mb-2",label:"Usu치rio",placeholder:"lucaswitch","error-messages":(t=e.errors)==null?void 0:t.username,clearable:""},null,8,["modelValue","readonly","error-messages"]),e.form.username&&e.form.username.length>0?(i(),c(h,{key:0,modelValue:e.form.password,"onUpdate:modelValue":r[1]||(r[1]=m=>e.form.password=m),"append-inner-icon":e.show_password?"mdi-eye":"mdi-eye-off",type:e.show_password?"text":"password","error-messages":(u=e.errors)==null?void 0:u.password,name:"input-10-1",variant:"outlined",label:"Senha",clearable:"","onClick:appendInner":a.handleOnClickPasswordIcon},null,8,["modelValue","append-inner-icon","type","error-messages","onClick:appendInner"])):p("",!0),e.form.username&&e.form.username.length>0&&e.form.password&&e.form.password.length>0?(i(),w("div",z,[E,l(v,{loading:e.loading,color:"primary",type:"submit",onClick:a.handleOnLogin,block:""},{default:d(()=>[x(" Entrar ")]),_:1},8,["loading","onClick"])])):p("",!0)]}),_:1},8,["onSubmit"])}const T=_(N,[["render",P]]),j={components:{SignInForm:T}},q=g("h1",{class:"d-flex justify-center mb-10"},"Login",-1);function Y(s,r,o,n,e,a){const t=k("sign-in-form");return i(),w(V,null,[q,l(O,{class:"mx-auto px-6 py-8","max-width":"444",title:"Realizar login"},{default:d(()=>[l(t)]),_:1})],64)}const K=_(j,[["render",Y]]);export{K as default};
