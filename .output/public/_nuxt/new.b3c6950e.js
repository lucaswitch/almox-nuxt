import{n as x,r as _,u as e,o as l,c as d,a as m,t as V,b as a,w as t,d as u,v as g,A,F as B}from"./entry.a8ea04dc.js";import{E}from"./validation.977342dc.js";import{u as $}from"./auth.cb07611c.js";import{V as h}from"./VBtn.fb6611c3.js";import{V as b,a as F}from"./VRow.be53b986.js";import{V as N}from"./VTextField.7b7381e2.js";import{V as S}from"./VForm.fdb6c9e3.js";import{V as I,a as R,b as T}from"./VCard.73ffbd1f.js";import"./moment.fbc5633a.js";import"./tag.19ec8209.js";/* empty css              */import"./index.2e760ea7.js";import"./VImg.e08626a0.js";import"./forwardRefs.d6ed2341.js";import"./VAvatar.28b1b839.js";const q={key:0,class:"px-3"},z={key:0},D={class:"text-body-1"},M={key:1},Q={class:"text-body-1"},U={class:"py-2"},j={key:1},G=x({__name:"stock-entry-form",props:{material_id:String},setup(c){const{material_id:p}=c,f=$(),r=_(!1),s=_(null),o=_(0),i=_({});async function k(){i.value={};try{return await E.validate({amount:Number(o.value)}),!0}catch(n){return i.value[n.path]=n.message,!1}}async function w(){if(await k()&&r){r.value=!0;try{s.value=await $fetch("/api/entry",{method:"post",body:{amount:parseInt(o.value,10),material_id:parseInt(p,10)},headers:{Authorization:`Bearer ${f.token}`}})}catch(n){i.value=n.response._data.data}r.value=!1}}return(n,v)=>e(s)?(l(),d("div",q,[e(s).amount>0?(l(),d("div",z,[m("p",D,V(e(s).amount)+" itens adicionados com sucesso ao estoque de materiais! ",1)])):(l(),d("div",M,[m("p",Q,V(Math.abs(e(s).amount,10))+" itens removido com sucesso do estoque de materiais! ",1)])),m("div",U,[a(h,{color:"primary",href:"/dashboard/materials/"+c.material_id+"/entry"},{default:t(()=>[u(" Continuar ")]),_:1},8,["href"])])])):(l(),d("div",j,[a(S,{class:"px-3"},{default:t(()=>[a(b,{align:"center"},{default:t(()=>[a(F,null,{default:t(()=>{var y;return[a(N,{variant:"outlined",modelValue:e(o),"onUpdate:modelValue":v[0]||(v[0]=C=>g(o)?o.value=C:null),clearable:"",label:"Quantidade","error-messages":(y=e(i))!=null&&y.amount?[e(i).amount]:""},null,8,["modelValue","error-messages"])]}),_:1})]),_:1}),a(b,{class:"py-2 px-2"},{default:t(()=>[a(h,{color:"primary",onClick:w,disabled:e(r)},{default:t(()=>[u(" Adicionar ")]),_:1},8,["disabled"]),a(h,{color:"primary",variant:"outlined",class:"ml-2",href:"/dashboard/materials/"+c.material_id+"/entry"},{default:t(()=>[u(" Voltar ")]),_:1},8,["href"])]),_:1})]),_:1})]))}}),H=m("h6",{class:"text-h6"}," Entradas e saidas / Adicionar entrada ",-1),J={class:"mt-4"},na=x({__name:"new",setup(c){const p=A(),f=parseInt(p.params.id,10);return(r,s)=>(l(),d(B,null,[H,a(T,{class:"mt-2 pb-3","max-width":"644"},{default:t(()=>[a(I,null,{default:t(()=>[u(" Entradas ")]),_:1}),a(R,null,{default:t(()=>[u(" Adicione uma nova entrada ")]),_:1}),m("div",J,[a(G,{material_id:e(f)},null,8,["material_id"])])]),_:1})],64))}});export{na as default};
