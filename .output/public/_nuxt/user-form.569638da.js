import{n as f,_ as V,o as h,c as _,b as l,w as a,d as m,t as g,F as y,a as p}from"./entry.ed656c21.js";import{u as w}from"./auth.3e11f5f3.js";import{U as b,V as d,a as u,b as x,c as U}from"./VSnackbar.9ac8f53e.js";import{g as n,h as v}from"./VCard.dccd0248.js";import{V as k}from"./VBtn.0a83d323.js";const B={props:["id"],setup({id:o=null}){return{auth:w(),id:o}},data(){return{full_name:"",username:"",password:"",type:"",errors:{},default_types:["Admin","Professor"],created:null}},methods:{async validate(o){this.errors={};try{return await b.validate(o),!0}catch(s){return console.log(s),this.errors[s.path]=s.message,console.log(s.path,s.message),!1}},async add(){if(this.created)return;const o={full_name:this.full_name,username:this.username,password:this.password,type:this.type};if(this.id&&(o.id=this.id),await this.validate(o))try{this.created=await $fetch("/api/users",{method:"post",body:o,headers:{Authorization:`Bearer ${this.auth.token}`}}),f("/dashboard/users")}catch(i){console.error(i)}}},async mounted(){if(this.id){const{username:o,full_name:s,role:i}=await $fetch("/api/users?id="+this.id);this.username=o,this.full_name=s,this.type=i===0?"Admin":"Professor"}}},E=p("p",{class:"text-caption"}," Perfil ",-1),F=p("p",{class:"text-caption"}," Usu치rio de acesso ",-1);function S(o,s,i,A,e,c){return h(),_(y,null,[l(v,{class:"px-6"},{default:a(()=>[E,l(d,null,{default:a(()=>[l(u,{cols:"12",sm:"12",md:"6",lg:"6"},{default:a(()=>{var r;return[l(n,{variant:"outlined",modelValue:e.full_name,"onUpdate:modelValue":s[0]||(s[0]=t=>e.full_name=t),label:"Nome completo","error-messages":(r=e.errors)!=null&&r.full_name?[e.errors.full_name]:"",clearable:""},null,8,["modelValue","error-messages"])]}),_:1}),l(u,{cols:"12",sm:"12",md:"6",lg:"6"},{default:a(()=>{var r;return[l(n,{variant:"outlined",modelValue:e.username,"onUpdate:modelValue":s[1]||(s[1]=t=>e.username=t),label:"Usu치rio para login","error-messages":(r=e.errors)!=null&&r.username?[e.errors.username]:"",clearable:""},null,8,["modelValue","error-messages"])]}),_:1})]),_:1}),F,l(d,null,{default:a(()=>[l(u,{cols:"12",sm:"12",md:"6",lg:"6"},{default:a(()=>{var r;return[l(n,{variant:"outlined",modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=t=>e.password=t),label:"Senha","error-messages":(r=e.errors)!=null&&r.password?[e.errors.password]:"",clearable:""},null,8,["modelValue","error-messages"])]}),_:1}),l(u,{cols:"12",sm:"12",md:"6",lg:"6"},{default:a(()=>{var r;return[l(x,{label:"Tipo de usu치rio",modelValue:e.type,"onUpdate:modelValue":s[3]||(s[3]=t=>e.type=t),items:e.default_types,variant:"outlined","error-messages":(r=e.errors)!=null&&r.type?[e.errors.type]:""},null,8,["modelValue","items","error-messages"])]}),_:1})]),_:1}),l(k,{color:"primary",onClick:c.add},{default:a(()=>[m(" Prosseguir ")]),_:1},8,["onClick"])]),_:1}),l(U,{modelValue:e.created,"onUpdate:modelValue":s[4]||(s[4]=r=>e.created=r),"multi-line":""},{default:a(()=>{var r;return[m(" O usu치rio "+g((r=e.created)==null?void 0:r.full)+" acaba de ser adicionado ",1)]}),_:1},8,["modelValue"])],64)}const D=V(B,[["render",S]]);export{D as U};
